"use strict";

/**
 * Copyright (c) 2011-2018, Hortonworks Inc.  All rights reserved.
 * Except as expressly permitted in a written agreement between you
 * or your company and Hortonworks, Inc, any use, reproduction,
 * modification, redistribution, sharing, lending or other exploitation
 * of all or any part of the contents of this file is strictly prohibited.
 */
//#region Alert tester
var addAlert = function addAlert(message) {
  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

  var makeAlert = function makeAlert(message, options) {
    var alert = document.createElement('div');
    alert.classList.add('alert', 'fade');
    alert.setAttribute('role', 'alert');

    switch (options.type) {
      case 'info':
        alert.classList.add('alert-info');
        break;

      case 'success':
        alert.classList.add('alert-success');
        break;

      case 'warning':
        alert.classList.add('alert-warning');
        break;

      case 'danger':
        alert.classList.add('alert-danger');
        break;

      default:
        alert.classList.add('alert-default');
        break;
    }

    var wrapper = document.createElement('div');
    var heading = document.createElement('div');
    heading.classList.add('alert-heading');
    heading.innerHTML = message;
    wrapper.appendChild(heading);

    if (options.content) {
      var _content = document.createElement('div');

      _content.innerHTML = options.content;
      wrapper.appendChild(_content);
    }

    alert.appendChild(wrapper);

    if (options.dismissible) {
      alert.classList.add('alert-dismissible');
      var temp = document.createElement('div');
      temp.innerHTML = '<button type="button" class="close" aria-label="Close" onclick="dismissAlertHandler(this)"></button>';
      alert.appendChild(temp.firstChild);
    }

    var alertCollapse = document.createElement('div');
    alertCollapse.classList.add('alert-collapse', 'collapse', 'show');
    alertCollapse.appendChild(alert);
    return alertCollapse;
  };

  if (!message || typeof message !== 'string') return;
  var _options$target = options.target,
      target = _options$target === void 0 ? document.documentElement : _options$target,
      _options$type = options.type,
      type = _options$type === void 0 ? 'default' : _options$type,
      _options$content = options.content,
      content = _options$content === void 0 ? null : _options$content,
      _options$dismissible = options.dismissible,
      dismissible = _options$dismissible === void 0 ? true : _options$dismissible,
      _options$duration = options.duration,
      duration = _options$duration === void 0 ? 0 : _options$duration,
      _options$position = options.position,
      position = _options$position === void 0 ? 'first' : _options$position;
  var alert = makeAlert(message, {
    target: target,
    type: type,
    content: content,
    dismissible: dismissible,
    duration: duration,
    position: position
  });

  if (position === 'first') {
    target.insertBefore(alert, target.firstChild);
  } else {
    target.appendChild(alert);
  }

  setTimeout(function () {
    return alert.firstChild.classList.add('show');
  });

  if (duration) {
    setTimeout(function () {
      return dismissAlert($(alert.firstChild));
    }, duration * 1000);
  }
};

var addAlertHandler = function addAlertHandler(event) {
  event.preventDefault();

  var arrayToObj = function arrayToObj(output, input) {
    output[input.name] = input.value;
    return output;
  };

  var data = $(event.currentTarget).serializeArray().reduce(arrayToObj, {});

  var getTarget = function getTarget(topBottom, rightLeft) {
    var id;

    if (topBottom === 'top') {
      if (rightLeft === 'right') {
        id = 'alertsTopRight';
      } else {
        id = 'alertsTopLeft';
      }
    } else {
      if (rightLeft === 'right') {
        id = 'alertsBottomRight';
      } else {
        id = 'alertsBottomLeft';
      }
    }

    return document.getElementById(id) || document.documentElement;
  };

  var options = {
    target: getTarget(data.alertTopBottom, data.alertRightLeft),
    type: data.alertType,
    content: data.alertContent,
    dismissible: !!data.alertDismissible,
    duration: Number.parseInt(data.alertDuration),
    position: data.alertTopBottom === 'bottom' ? 'first' : 'last'
  };
  addAlert(data.alertMessage, options);
  return false;
};

var dismissAlert = function dismissAlert(alert) {
  var alertCollapse = alert.closest('.alert-collapse');
  alert.one('close.bs.alert', function () {
    return alertCollapse.collapse('hide');
  });
  alertCollapse.one('hidden.bs.collapse', function () {
    return alertCollapse.remove();
  });
  alert.alert('close');
};

var dismissAlertHandler = function dismissAlertHandler(close) {
  var alert = $(close).closest('.alert');
  dismissAlert(alert);
};

var dismissAllAlerts = function dismissAllAlerts() {
  $(".alert-container .alert").alert('close');
}; //#endregion
//#region Container example


var updateContainerExample = function updateContainerExample() {
  $('#documentWidth').text($('body').css('width'));
  $('#containerWidth').text($('#containerExample').css('width'));
  $('#containerFluidWidth').text($('#containerFluidExample').css('width'));
};

$(function () {
  $('[data-toggle="popover"]').popover();
  $('[data-toggle="tooltip"]').tooltip();
  updateContainerExample();
  $(window).resize(updateContainerExample);
  $('#addAlert').on('submit', addAlertHandler);
  $('#dismissAllAlerts').on('click', dismissAllAlerts);
}); //#endregion
//#region Wizard in modal

var currentStep;

function updateDisplayedStep(targetStep) {
  var toHide = document.querySelectorAll('[class*="step-"]');
  Array.prototype.forEach.call(toHide, function (el) {
    el.style.display = 'none';
  });
  var toShow = document.getElementsByClassName("step-".concat(targetStep));
  Array.prototype.forEach.call(toShow, function (el) {
    el.style.display = 'block';
  });
  var buttons = document.getElementsByClassName('wizard-nav-button');
  Array.prototype.forEach.call(buttons, function (el) {
    el.style.display = 'block';
  });
  document.getElementById('finish').style.display = 'none';

  if (targetStep === 1) {
    document.getElementById('back').style.display = 'none';
  }

  if (targetStep === 3) {
    document.getElementById('next').style.display = 'none';
    document.getElementById('finish').style.display = 'block';
  }
}

function back() {
  updateDisplayedStep(--currentStep);
}

function next() {
  updateDisplayedStep(++currentStep);
}

function goToStep(step) {
  currentStep = step;
  updateDisplayedStep(step);
}

function cancelConfirmation(selector) {
  $(selector).one('hidden.bs.modal', function () {
    return $('body').addClass('modal-open');
  });
  $(selector).modal('hide');
} //#endregion
//#region Form validation
// Example starter JavaScript for disabling form submissions if there are invalid fields


(function () {
  'use strict';

  window.addEventListener('load', function () {
    // Fetch all the forms we want to apply custom Bootstrap validation styles to
    var forms = document.getElementsByTagName('form'); // Loop over them and prevent submission

    var validation = Array.prototype.filter.call(forms, function (form) {
      if (form.classList.contains('validate')) {
        form.addEventListener('submit', function (event) {
          if (form.checkValidity() === false) {
            event.preventDefault();
            event.stopPropagation();
          }

          form.classList.add('was-validated');
        }, false);
      }
    });
  }, false);
})(); //#endregion
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRlbW8uanMiXSwibmFtZXMiOlsiYWRkQWxlcnQiLCJtZXNzYWdlIiwib3B0aW9ucyIsIm1ha2VBbGVydCIsImFsZXJ0IiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwic2V0QXR0cmlidXRlIiwidHlwZSIsIndyYXBwZXIiLCJoZWFkaW5nIiwiaW5uZXJIVE1MIiwiYXBwZW5kQ2hpbGQiLCJjb250ZW50IiwiZGlzbWlzc2libGUiLCJ0ZW1wIiwiZmlyc3RDaGlsZCIsImFsZXJ0Q29sbGFwc2UiLCJ0YXJnZXQiLCJkb2N1bWVudEVsZW1lbnQiLCJkdXJhdGlvbiIsInBvc2l0aW9uIiwiaW5zZXJ0QmVmb3JlIiwic2V0VGltZW91dCIsImRpc21pc3NBbGVydCIsIiQiLCJhZGRBbGVydEhhbmRsZXIiLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwiYXJyYXlUb09iaiIsIm91dHB1dCIsImlucHV0IiwibmFtZSIsInZhbHVlIiwiZGF0YSIsImN1cnJlbnRUYXJnZXQiLCJzZXJpYWxpemVBcnJheSIsInJlZHVjZSIsImdldFRhcmdldCIsInRvcEJvdHRvbSIsInJpZ2h0TGVmdCIsImlkIiwiZ2V0RWxlbWVudEJ5SWQiLCJhbGVydFRvcEJvdHRvbSIsImFsZXJ0UmlnaHRMZWZ0IiwiYWxlcnRUeXBlIiwiYWxlcnRDb250ZW50IiwiYWxlcnREaXNtaXNzaWJsZSIsIk51bWJlciIsInBhcnNlSW50IiwiYWxlcnREdXJhdGlvbiIsImFsZXJ0TWVzc2FnZSIsImNsb3Nlc3QiLCJvbmUiLCJjb2xsYXBzZSIsInJlbW92ZSIsImRpc21pc3NBbGVydEhhbmRsZXIiLCJjbG9zZSIsImRpc21pc3NBbGxBbGVydHMiLCJ1cGRhdGVDb250YWluZXJFeGFtcGxlIiwidGV4dCIsImNzcyIsInBvcG92ZXIiLCJ0b29sdGlwIiwid2luZG93IiwicmVzaXplIiwib24iLCJjdXJyZW50U3RlcCIsInVwZGF0ZURpc3BsYXllZFN0ZXAiLCJ0YXJnZXRTdGVwIiwidG9IaWRlIiwicXVlcnlTZWxlY3RvckFsbCIsIkFycmF5IiwicHJvdG90eXBlIiwiZm9yRWFjaCIsImNhbGwiLCJlbCIsInN0eWxlIiwiZGlzcGxheSIsInRvU2hvdyIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJidXR0b25zIiwiYmFjayIsIm5leHQiLCJnb1RvU3RlcCIsInN0ZXAiLCJjYW5jZWxDb25maXJtYXRpb24iLCJzZWxlY3RvciIsImFkZENsYXNzIiwibW9kYWwiLCJhZGRFdmVudExpc3RlbmVyIiwiZm9ybXMiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsInZhbGlkYXRpb24iLCJmaWx0ZXIiLCJmb3JtIiwiY29udGFpbnMiLCJjaGVja1ZhbGlkaXR5Iiwic3RvcFByb3BhZ2F0aW9uIl0sIm1hcHBpbmdzIjoiOztBQUFBOzs7Ozs7O0FBUUE7QUFDQSxJQUFNQSxRQUFRLEdBQUcsU0FBWEEsUUFBVyxDQUFDQyxPQUFELEVBQTJCO0FBQUEsTUFBakJDLE9BQWlCLHVFQUFQLEVBQU87O0FBQzFDLE1BQU1DLFNBQVMsR0FBRyxTQUFaQSxTQUFZLENBQUNGLE9BQUQsRUFBVUMsT0FBVixFQUFzQjtBQUN0QyxRQUFNRSxLQUFLLEdBQUdDLFFBQVEsQ0FBQ0MsYUFBVCxDQUF1QixLQUF2QixDQUFkO0FBQ0FGLElBQUFBLEtBQUssQ0FBQ0csU0FBTixDQUFnQkMsR0FBaEIsQ0FBb0IsT0FBcEIsRUFBNkIsTUFBN0I7QUFDQUosSUFBQUEsS0FBSyxDQUFDSyxZQUFOLENBQW1CLE1BQW5CLEVBQTJCLE9BQTNCOztBQUVBLFlBQVFQLE9BQU8sQ0FBQ1EsSUFBaEI7QUFDRSxXQUFLLE1BQUw7QUFDRU4sUUFBQUEsS0FBSyxDQUFDRyxTQUFOLENBQWdCQyxHQUFoQixDQUFvQixZQUFwQjtBQUNBOztBQUNGLFdBQUssU0FBTDtBQUNFSixRQUFBQSxLQUFLLENBQUNHLFNBQU4sQ0FBZ0JDLEdBQWhCLENBQW9CLGVBQXBCO0FBQ0E7O0FBQ0YsV0FBSyxTQUFMO0FBQ0VKLFFBQUFBLEtBQUssQ0FB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KiBDb3B5cmlnaHQgKGMpIDIwMTEtMjAxOCwgSG9ydG9ud29ya3MgSW5jLiAgQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEV4Y2VwdCBhcyBleHByZXNzbHkgcGVybWl0dGVkIGluIGEgd3JpdHRlbiBhZ3JlZW1lbnQgYmV0d2VlbiB5b3VcbiAqIG9yIHlvdXIgY29tcGFueSBhbmQgSG9ydG9ud29ya3MsIEluYywgYW55IHVzZSwgcmVwcm9kdWN0aW9uLFxuICogbW9kaWZpY2F0aW9uLCByZWRpc3RyaWJ1dGlvbiwgc2hhcmluZywgbGVuZGluZyBvciBvdGhlciBleHBsb2l0YXRpb25cbiAqIG9mIGFsbCBvciBhbnkgcGFydCBvZiB0aGUgY29udGVudHMgb2YgdGhpcyBmaWxlIGlzIHN0cmljdGx5IHByb2hpYml0ZWQuXG4gKi9cblxuLy8jcmVnaW9uIEFsZXJ0IHRlc3RlclxuY29uc3QgYWRkQWxlcnQgPSAobWVzc2FnZSwgb3B0aW9ucyA9IHt9KSA9PiB7XG4gIGNvbnN0IG1ha2VBbGVydCA9IChtZXNzYWdlLCBvcHRpb25zKSA9PiB7XG4gICAgY29uc3QgYWxlcnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBhbGVydC5jbGFzc0xpc3QuYWRkKCdhbGVydCcsICdmYWRlJyk7XG4gICAgYWxlcnQuc2V0QXR0cmlidXRlKCdyb2xlJywgJ2FsZXJ0Jyk7XG5cbiAgICBzd2l0Y2ggKG9wdGlvbnMudHlwZSkge1xuICAgICAgY2FzZSAnaW5mbyc6XG4gICAgICAgIGFsZXJ0LmNsYXNzTGlzdC5hZGQoJ2FsZXJ0LWluZm8nKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdzdWNjZXNzJzpcbiAgICAgICAgYWxlcnQuY2xhc3NMaXN0LmFkZCgnYWxlcnQtc3VjY2VzcycpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3dhcm5pbmcnOlxuICAgICAgICBhbGVydC5jbGFzc0xpc3QuYWRkKCdhbGVydC13YXJuaW5nJyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnZGFuZ2VyJzpcbiAgICAgICAgYWxlcnQuY2xhc3NMaXN0LmFkZCgnYWxlcnQtZGFuZ2VyJyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYWxlcnQuY2xhc3NMaXN0LmFkZCgnYWxlcnQtZGVmYXVsdCcpO1xuICAgICAgICBicmVhaztcbiAgICB9XG5cbiAgICBjb25zdCB3cmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cbiAgICBjb25zdCBoZWFkaW5nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgaGVhZGluZy5jbGFzc0xpc3QuYWRkKCdhbGVydC1oZWFkaW5nJyk7XG4gICAgaGVhZGluZy5pbm5lckhUTUwgPSBtZXNzYWdlO1xuICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQoaGVhZGluZyk7XG5cbiAgICBpZiAob3B0aW9ucy5jb250ZW50KSB7XG4gICAgICBjb25zdCBjb250ZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICBjb250ZW50LmlubmVySFRNTCA9IG9wdGlvbnMuY29udGVudDtcbiAgICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQoY29udGVudCk7XG4gICAgfVxuXG4gICAgYWxlcnQuYXBwZW5kQ2hpbGQod3JhcHBlcik7XG5cbiAgICBpZiAob3B0aW9ucy5kaXNtaXNzaWJsZSkge1xuICAgICAgYWxlcnQuY2xhc3NMaXN0LmFkZCgnYWxlcnQtZGlzbWlzc2libGUnKTtcbiAgICAgIGNvbnN0IHRlbXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgIHRlbXAuaW5uZXJIVE1MID0gJzxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiY2xvc2VcIiBhcmlhLWxhYmVsPVwiQ2xvc2VcIiBvbmNsaWNrPVwiZGlzbWlzc0FsZXJ0SGFuZGxlcih0aGlzKVwiPjwvYnV0dG9uPic7XG4gICAgICBhbGVydC5hcHBlbmRDaGlsZCh0ZW1wLmZpcnN0Q2hpbGQpO1xuICAgIH1cblxuICAgIGNvbnN0IGFsZXJ0Q29sbGFwc2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBhbGVydENvbGxhcHNlLmNsYXNzTGlzdC5hZGQoJ2FsZXJ0LWNvbGxhcHNlJywgJ2NvbGxhcHNlJywgJ3Nob3cnKTtcbiAgICBhbGVydENvbGxhcHNlLmFwcGVuZENoaWxkKGFsZXJ0KTtcblxuICAgIHJldHVybiBhbGVydENvbGxhcHNlO1xuICB9O1xuXG4gIGlmICghbWVzc2FnZSB8fCB0eXBlb2YgbWVzc2FnZSAhPT0gJ3N0cmluZycpIHJldHVybjtcblxuICBjb25zdCB7XG4gICAgdGFyZ2V0ID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LFxuICAgIHR5cGUgPSAnZGVmYXVsdCcsIC8vIG1heSBiZSAnaW5mbycsICdzdWNjZXNzJywgJ3dhcm5pbmcnLCAnZGFuZ2VyJywgb3IgJ2RlZmF1bHQnXG4gICAgY29udGVudCA9IG51bGwsXG4gICAgZGlzbWlzc2libGUgPSB0cnVlLFxuICAgIGR1cmF0aW9uID0gMCwgLy9pbiBzZWNvbmRzXG4gICAgcG9zaXRpb24gPSAnZmlyc3QnIC8vIGlmICdmaXJzdCcgYWxlcnQgd2lsbCBiZSBpbnNlcnRlZCBhYm92ZSBleGlzdGluZyBhbGVydHNcbiAgfSA9IG9wdGlvbnM7XG5cbiAgY29uc3QgYWxlcnQgPSBtYWtlQWxlcnQobWVzc2FnZSwge3RhcmdldCwgdHlwZSwgY29udGVudCwgZGlzbWlzc2libGUsIGR1cmF0aW9uLCBwb3NpdGlvbn0pO1xuXG4gIGlmIChwb3NpdGlvbiA9PT0gJ2ZpcnN0Jykge1xuICAgIHRhcmdldC5pbnNlcnRCZWZvcmUoYWxlcnQsIHRhcmdldC5maXJzdENoaWxkKTtcbiAgfSBlbHNlIHtcbiAgICB0YXJnZXQuYXBwZW5kQ2hpbGQoYWxlcnQpO1xuICB9XG5cbiAgc2V0VGltZW91dCgoKSA9PiBhbGVydC5maXJzdENoaWxkLmNsYXNzTGlzdC5hZGQoJ3Nob3cnKSk7XG5cbiAgaWYgKGR1cmF0aW9uKSB7XG4gICAgc2V0VGltZW91dCgoKSA9PiBkaXNtaXNzQWxlcnQoJChhbGVydC5maXJzdENoaWxkKSksIGR1cmF0aW9uICogMTAwMCk7XG4gIH1cbn07XG5cbmNvbnN0IGFkZEFsZXJ0SGFuZGxlciA9IGV2ZW50ID0+IHtcbiAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICBjb25zdCBhcnJheVRvT2JqID0gKG91dHB1dCwgaW5wdXQpID0+IHtcbiAgICBvdXRwdXRbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcbiAgICByZXR1cm4gb3V0cHV0O1xuICB9O1xuXG4gIGNvbnN0IGRhdGEgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLnNlcmlhbGl6ZUFycmF5KCkucmVkdWNlKGFycmF5VG9PYmosIHt9KTtcblxuICBjb25zdCBnZXRUYXJnZXQgPSAodG9wQm90dG9tLCByaWdodExlZnQpID0+IHtcbiAgICBsZXQgaWQ7XG5cbiAgICBpZiAodG9wQm90dG9tID09PSAndG9wJykge1xuICAgICAgaWYgKHJpZ2h0TGVmdCA9PT0gJ3JpZ2h0Jykge1xuICAgICAgICBpZCA9ICdhbGVydHNUb3BSaWdodCc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZCA9ICdhbGVydHNUb3BMZWZ0JztcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHJpZ2h0TGVmdCA9PT0gJ3JpZ2h0Jykge1xuICAgICAgICBpZCA9ICdhbGVydHNCb3R0b21SaWdodCc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZCA9ICdhbGVydHNCb3R0b21MZWZ0JztcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpIHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcbiAgfVxuXG4gIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgdGFyZ2V0OiBnZXRUYXJnZXQoZGF0YS5hbGVydFRvcEJvdHRvbSwgZGF0YS5hbGVydFJpZ2h0TGVmdCksXG4gICAgdHlwZTogZGF0YS5hbGVydFR5cGUsXG4gICAgY29udGVudDogZGF0YS5hbGVydENvbnRlbnQsXG4gICAgZGlzbWlzc2libGU6ICEhZGF0YS5hbGVydERpc21pc3NpYmxlLFxuICAgIGR1cmF0aW9uOiBOdW1iZXIucGFyc2VJbnQoZGF0YS5hbGVydER1cmF0aW9uKSxcbiAgICBwb3NpdGlvbjogZGF0YS5hbGVydFRvcEJvdHRvbSA9PT0gJ2JvdHRvbScgPyAnZmlyc3QnIDogJ2xhc3QnXG4gIH07XG5cbiAgYWRkQWxlcnQoZGF0YS5hbGVydE1lc3NhZ2UsIG9wdGlvbnMpO1xuXG4gIHJldHVybiBmYWxzZTtcbn07XG5cbmNvbnN0IGRpc21pc3NBbGVydCA9IGFsZXJ0ID0+IHtcbiAgY29uc3QgYWxlcnRDb2xsYXBzZSA9IGFsZXJ0LmNsb3Nlc3QoJy5hbGVydC1jb2xsYXBzZScpO1xuXG4gIGFsZXJ0Lm9uZSgnY2xvc2UuYnMuYWxlcnQnLCAoKSA9PiBhbGVydENvbGxhcHNlLmNvbGxhcHNlKCdoaWRlJykpO1xuICBhbGVydENvbGxhcHNlLm9uZSgnaGlkZGVuLmJzLmNvbGxhcHNlJywgKCkgPT4gYWxlcnRDb2xsYXBzZS5yZW1vdmUoKSk7XG5cbiAgYWxlcnQuYWxlcnQoJ2Nsb3NlJyk7XG59O1xuXG5jb25zdCBkaXNtaXNzQWxlcnRIYW5kbGVyID0gY2xvc2UgPT4ge1xuICBjb25zdCBhbGVydCA9ICQoY2xvc2UpLmNsb3Nlc3QoJy5hbGVydCcpO1xuICBkaXNtaXNzQWxlcnQoYWxlcnQpO1xufTtcblxuY29uc3QgZGlzbWlzc0FsbEFsZXJ0cyA9ICgpID0+IHtcbiAgJChcIi5hbGVydC1jb250YWluZXIgLmFsZXJ0XCIpLmFsZXJ0KCdjbG9zZScpO1xufTtcbi8vI2VuZHJlZ2lvblxuXG4vLyNyZWdpb24gQ29udGFpbmVyIGV4YW1wbGVcbmNvbnN0IHVwZGF0ZUNvbnRhaW5lckV4YW1wbGUgPSBmdW5jdGlvbiAoKSB7XG4gICQoJyNkb2N1bWVudFdpZHRoJykudGV4dCgkKCdib2R5JykuY3NzKCd3aWR0aCcpKTtcbiAgJCgnI2NvbnRhaW5lcldpZHRoJykudGV4dCgkKCcjY29udGFpbmVyRXhhbXBsZScpLmNzcygnd2lkdGgnKSk7XG4gICQoJyNjb250YWluZXJGbHVpZFdpZHRoJykudGV4dCgkKCcjY29udGFpbmVyRmx1aWRFeGFtcGxlJykuY3NzKCd3aWR0aCcpKTtcbn07XG5cbiQoZnVuY3Rpb24gKCkge1xuICAkKCdbZGF0YS10b2dnbGU9XCJwb3BvdmVyXCJdJykucG9wb3ZlcigpO1xuICAkKCdbZGF0YS10b2dnbGU9XCJ0b29sdGlwXCJdJykudG9vbHRpcCgpO1xuXG4gIHVwZGF0ZUNvbnRhaW5lckV4YW1wbGUoKTtcbiAgJCh3aW5kb3cpLnJlc2l6ZSh1cGRhdGVDb250YWluZXJFeGFtcGxlKTtcblxuICAkKCcjYWRkQWxlcnQnKS5vbignc3VibWl0JywgYWRkQWxlcnRIYW5kbGVyKTtcbiAgJCgnI2Rpc21pc3NBbGxBbGVydHMnKS5vbignY2xpY2snLCBkaXNtaXNzQWxsQWxlcnRzKTtcbn0pO1xuLy8jZW5kcmVnaW9uXG5cbi8vI3JlZ2lvbiBXaXphcmQgaW4gbW9kYWxcbmxldCBjdXJyZW50U3RlcDtcblxuZnVuY3Rpb24gdXBkYXRlRGlzcGxheWVkU3RlcCh0YXJnZXRTdGVwKSB7XG4gIGNvbnN0IHRvSGlkZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tjbGFzcyo9XCJzdGVwLVwiXScpO1xuICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKHRvSGlkZSwgZWwgPT4ge1xuICAgIGVsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gIH0pO1xuXG4gIGNvbnN0IHRvU2hvdyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoYHN0ZXAtJHt0YXJnZXRTdGVwfWApO1xuICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKHRvU2hvdywgZWwgPT4ge1xuICAgIGVsLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICB9KTtcblxuICBjb25zdCBidXR0b25zID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnd2l6YXJkLW5hdi1idXR0b24nKTtcbiAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChidXR0b25zLCBlbCA9PiB7XG4gICAgZWwuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gIH0pO1xuXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaW5pc2gnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICBpZiAodGFyZ2V0U3RlcCA9PT0gMSkge1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiYWNrJykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgfVxuICBpZiAodGFyZ2V0U3RlcCA9PT0gMykge1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduZXh0Jykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmluaXNoJykuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gIH1cbn1cblxuZnVuY3Rpb24gYmFjaygpIHtcbiAgdXBkYXRlRGlzcGxheWVkU3RlcCgtLWN1cnJlbnRTdGVwKTtcbn1cblxuZnVuY3Rpb24gbmV4dCgpIHtcbiAgdXBkYXRlRGlzcGxheWVkU3RlcCgrK2N1cnJlbnRTdGVwKTtcbn1cblxuZnVuY3Rpb24gZ29Ub1N0ZXAoc3RlcCkge1xuICBjdXJyZW50U3RlcCA9IHN0ZXA7XG4gIHVwZGF0ZURpc3BsYXllZFN0ZXAoc3RlcCk7XG59XG5cbmZ1bmN0aW9uIGNhbmNlbENvbmZpcm1hdGlvbihzZWxlY3Rvcikge1xuICAkKHNlbGVjdG9yKS5vbmUoJ2hpZGRlbi5icy5tb2RhbCcsICgpID0+ICQoJ2JvZHknKS5hZGRDbGFzcygnbW9kYWwtb3BlbicpKTtcbiAgJChzZWxlY3RvcikubW9kYWwoJ2hpZGUnKTtcbn1cbi8vI2VuZHJlZ2lvblxuXG4vLyNyZWdpb24gRm9ybSB2YWxpZGF0aW9uXG4vLyBFeGFtcGxlIHN0YXJ0ZXIgSmF2YVNjcmlwdCBmb3IgZGlzYWJsaW5nIGZvcm0gc3VibWlzc2lvbnMgaWYgdGhlcmUgYXJlIGludmFsaWQgZmllbGRzXG4oZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgZnVuY3Rpb24gKCkge1xuICAgIC8vIEZldGNoIGFsbCB0aGUgZm9ybXMgd2Ugd2FudCB0byBhcHBseSBjdXN0b20gQm9vdHN0cmFwIHZhbGlkYXRpb24gc3R5bGVzIHRvXG4gICAgdmFyIGZvcm1zID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2Zvcm0nKTtcbiAgICAvLyBMb29wIG92ZXIgdGhlbSBhbmQgcHJldmVudCBzdWJtaXNzaW9uXG4gICAgdmFyIHZhbGlkYXRpb24gPSBBcnJheS5wcm90b3R5cGUuZmlsdGVyLmNhbGwoZm9ybXMsIGZ1bmN0aW9uIChmb3JtKSB7XG4gICAgICBpZiAoZm9ybS5jbGFzc0xpc3QuY29udGFpbnMoJ3ZhbGlkYXRlJykpIHtcbiAgICAgICAgZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICBpZiAoZm9ybS5jaGVja1ZhbGlkaXR5KCkgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGZvcm0uY2xhc3NMaXN0LmFkZCgnd2FzLXZhbGlkYXRlZCcpO1xuICAgICAgICB9LCBmYWxzZSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0sIGZhbHNlKTtcbn0pKCk7XG4vLyNlbmRyZWdpb25cbiJdLCJmaWxlIjoiZGVtby5qcyJ9
