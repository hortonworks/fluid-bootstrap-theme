"use strict";

/**
 * Copyright (c) 2011-2018, Hortonworks Inc.  All rights reserved.
 * Except as expressly permitted in a written agreement between you
 * or your company and Hortonworks, Inc, any use, reproduction,
 * modification, redistribution, sharing, lending or other exploitation
 * of all or any part of the contents of this file is strictly prohibited.
 */
//#region Alert tester
var addAlert = function addAlert(message) {
  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

  var makeAlert = function makeAlert(message, options) {
    var alert = document.createElement('div');
    alert.classList.add('alert', 'fade');
    alert.setAttribute('role', 'alert');

    switch (options.type) {
      case 'info':
        alert.classList.add('alert-info');
        break;

      case 'success':
        alert.classList.add('alert-success');
        break;

      case 'warning':
        alert.classList.add('alert-warning');
        break;

      case 'danger':
        alert.classList.add('alert-danger');
        break;

      default:
        alert.classList.add('alert-default');
        break;
    }

    var wrapper = document.createElement('div');
    var heading = document.createElement('div');
    heading.classList.add('alert-heading');
    heading.innerHTML = message;
    wrapper.appendChild(heading);

    if (options.content) {
      var _content = document.createElement('div');

      _content.innerHTML = options.content;
      wrapper.appendChild(_content);
    }

    alert.appendChild(wrapper);

    if (options.dismissible) {
      alert.classList.add('alert-dismissible');
      var temp = document.createElement('div');
      temp.innerHTML = '<button type="button" class="close" aria-label="Close" onclick="dismissAlertHandler(this)"></button>';
      alert.appendChild(temp.firstChild);
    }

    var alertCollapse = document.createElement('div');
    alertCollapse.classList.add('alert-collapse', 'collapse', 'show');
    alertCollapse.appendChild(alert);
    return alertCollapse;
  };

  if (!message || typeof message !== 'string') return;
  var _options$target = options.target,
      target = _options$target === void 0 ? document.documentElement : _options$target,
      _options$type = options.type,
      type = _options$type === void 0 ? 'default' : _options$type,
      _options$content = options.content,
      content = _options$content === void 0 ? null : _options$content,
      _options$dismissible = options.dismissible,
      dismissible = _options$dismissible === void 0 ? true : _options$dismissible,
      _options$duration = options.duration,
      duration = _options$duration === void 0 ? 0 : _options$duration,
      _options$position = options.position,
      position = _options$position === void 0 ? 'first' : _options$position;
  var alert = makeAlert(message, {
    target: target,
    type: type,
    content: content,
    dismissible: dismissible,
    duration: duration,
    position: position
  });

  if (position === 'first') {
    target.insertBefore(alert, target.firstChild);
  } else {
    target.appendChild(alert);
  }

  setTimeout(function () {
    return alert.firstChild.classList.add('show');
  });

  if (duration) {
    setTimeout(function () {
      return dismissAlert($(alert.firstChild));
    }, duration * 1000);
  }
};

var addAlertHandler = function addAlertHandler(event) {
  event.preventDefault();

  var arrayToObj = function arrayToObj(output, input) {
    output[input.name] = input.value;
    return output;
  };

  var data = $(event.currentTarget).serializeArray().reduce(arrayToObj, {});

  var getTarget = function getTarget(topBottom, rightLeft) {
    var id;

    if (topBottom === 'top') {
      if (rightLeft === 'right') {
        id = 'alertsTopRight';
      } else {
        id = 'alertsTopLeft';
      }
    } else {
      if (rightLeft === 'right') {
        id = 'alertsBottomRight';
      } else {
        id = 'alertsBottomLeft';
      }
    }

    return document.getElementById(id) || document.documentElement;
  };

  var options = {
    target: getTarget(data.alertTopBottom, data.alertRightLeft),
    type: data.alertType,
    content: data.alertContent,
    dismissible: !!data.alertDismissible,
    duration: window.parseInt(data.alertDuration),
    position: data.alertTopBottom === 'bottom' ? 'first' : 'last'
  };
  addAlert(data.alertMessage, options);
  return false;
};

var dismissAlert = function dismissAlert(alert) {
  var alertCollapse = alert.closest('.alert-collapse');
  alert.one('close.bs.alert', function () {
    return alertCollapse.collapse('hide');
  });
  alertCollapse.one('hidden.bs.collapse', function () {
    return alertCollapse.remove();
  });
  alert.alert('close');
};

var dismissAlertHandler = function dismissAlertHandler(close) {
  var alert = $(close).closest('.alert');
  dismissAlert(alert);
};

var dismissAllAlerts = function dismissAllAlerts() {
  $(".alert-container .alert").alert('close');
}; //#endregion
//#region Container example


var updateContainerExample = function updateContainerExample() {
  $('#documentWidth').text($('body').css('width'));
  $('#containerWidth').text($('#containerExample').css('width'));
  $('#containerFluidWidth').text($('#containerFluidExample').css('width'));
};

$(function () {
  if ($.fn.popover) {
    $('[data-toggle="popover"]').popover();
  }

  if ($.fn.tooltip) {
    $('[data-toggle="tooltip"]').tooltip();
  }

  updateContainerExample();
  $(window).resize(updateContainerExample);
  $('#addAlert').on('submit', addAlertHandler);
  $('#dismissAllAlerts').on('click', dismissAllAlerts);
}); //#endregion
//#region Wizard in modal

var currentStep;

function updateDisplayedStep(targetStep) {
  var toHide = document.querySelectorAll('[class*="step-"]');
  Array.prototype.forEach.call(toHide, function (el) {
    el.style.display = 'none';
  });
  var toShow = document.getElementsByClassName("step-".concat(targetStep));
  Array.prototype.forEach.call(toShow, function (el) {
    el.style.display = 'block';
  });
  var buttons = document.getElementsByClassName('wizard-nav-button');
  Array.prototype.forEach.call(buttons, function (el) {
    el.style.display = 'block';
  });
  document.getElementById('finish').style.display = 'none';

  if (targetStep === 1) {
    document.getElementById('back').style.display = 'none';
  }

  if (targetStep === 3) {
    document.getElementById('next').style.display = 'none';
    document.getElementById('finish').style.display = 'block';
  }
}

function back() {
  updateDisplayedStep(--currentStep);
}

function next() {
  updateDisplayedStep(++currentStep);
}

function goToStep(step) {
  currentStep = step;
  updateDisplayedStep(step);
}

function cancelConfirmation(selector) {
  $(selector).one('hidden.bs.modal', function () {
    return $('body').addClass('modal-open');
  });
  $(selector).modal('hide');
} //#endregion
//#region Form validation
// Example starter JavaScript for disabling form submissions if there are invalid fields


(function () {
  'use strict';

  window.addEventListener('load', function () {
    // Fetch all the forms we want to apply custom Bootstrap validation styles to
    var forms = document.getElementsByTagName('form'); // Loop over them and prevent submission

    var validation = Array.prototype.filter.call(forms, function (form) {
      if (form.classList.contains('validate')) {
        form.addEventListener('submit', function (event) {
          if (form.checkValidity() === false) {
            event.preventDefault();
            event.stopPropagation();
          }

          form.classList.add('was-validated');
        }, false);
      }
    });
  }, false);
})(); //#endregion
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRlbW8uanMiXSwibmFtZXMiOlsiYWRkQWxlcnQiLCJtZXNzYWdlIiwib3B0aW9ucyIsIm1ha2VBbGVydCIsImFsZXJ0IiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwic2V0QXR0cmlidXRlIiwidHlwZSIsIndyYXBwZXIiLCJoZWFkaW5nIiwiaW5uZXJIVE1MIiwiYXBwZW5kQ2hpbGQiLCJjb250ZW50IiwiZGlzbWlzc2libGUiLCJ0ZW1wIiwiZmlyc3RDaGlsZCIsImFsZXJ0Q29sbGFwc2UiLCJ0YXJnZXQiLCJkb2N1bWVudEVsZW1lbnQiLCJkdXJhdGlvbiIsInBvc2l0aW9uIiwiaW5zZXJ0QmVmb3JlIiwic2V0VGltZW91dCIsImRpc21pc3NBbGVydCIsIiQiLCJhZGRBbGVydEhhbmRsZXIiLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwiYXJyYXlUb09iaiIsIm91dHB1dCIsImlucHV0IiwibmFtZSIsInZhbHVlIiwiZGF0YSIsImN1cnJlbnRUYXJnZXQiLCJzZXJpYWxpemVBcnJheSIsInJlZHVjZSIsImdldFRhcmdldCIsInRvcEJvdHRvbSIsInJpZ2h0TGVmdCIsImlkIiwiZ2V0RWxlbWVudEJ5SWQiLCJhbGVydFRvcEJvdHRvbSIsImFsZXJ0UmlnaHRMZWZ0IiwiYWxlcnRUeXBlIiwiYWxlcnRDb250ZW50IiwiYWxlcnREaXNtaXNzaWJsZSIsIndpbmRvdyIsInBhcnNlSW50IiwiYWxlcnREdXJhdGlvbiIsImFsZXJ0TWVzc2FnZSIsImNsb3Nlc3QiLCJvbmUiLCJjb2xsYXBzZSIsInJlbW92ZSIsImRpc21pc3NBbGVydEhhbmRsZXIiLCJjbG9zZSIsImRpc21pc3NBbGxBbGVydHMiLCJ1cGRhdGVDb250YWluZXJFeGFtcGxlIiwidGV4dCIsImNzcyIsImZuIiwicG9wb3ZlciIsInRvb2x0aXAiLCJyZXNpemUiLCJvbiIsImN1cnJlbnRTdGVwIiwidXBkYXRlRGlzcGxheWVkU3RlcCIsInRhcmdldFN0ZXAiLCJ0b0hpZGUiLCJxdWVyeVNlbGVjdG9yQWxsIiwiQXJyYXkiLCJwcm90b3R5cGUiLCJmb3JFYWNoIiwiY2FsbCIsImVsIiwic3R5bGUiLCJkaXNwbGF5IiwidG9TaG93IiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsImJ1dHRvbnMiLCJiYWNrIiwibmV4dCIsImdvVG9TdGVwIiwic3RlcCIsImNhbmNlbENvbmZpcm1hdGlvbiIsInNlbGVjdG9yIiwiYWRkQ2xhc3MiLCJtb2RhbCIsImFkZEV2ZW50TGlzdGVuZXIiLCJmb3JtcyIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwidmFsaWRhdGlvbiIsImZpbHRlciIsImZvcm0iLCJjb250YWlucyIsImNoZWNrVmFsaWRpdHkiLCJzdG9wUHJvcGFnYXRpb24iXSwibWFwcGluZ3MiOiI7O0FBQUE7Ozs7Ozs7QUFRQTtBQUNBLElBQU1BLFFBQVEsR0FBRyxTQUFYQSxRQUFXLENBQUNDLE9BQUQsRUFBMkI7QUFBQSxNQUFqQkMsT0FBaUIsdUVBQVAsRUFBTzs7QUFDMUMsTUFBTUMsU0FBUyxHQUFHLFNBQVpBLFNBQVksQ0FBQ0YsT0FBRCxFQUFVQyxPQUFWLEVBQXNCO0FBQ3RDLFFBQU1FLEtBQUssR0FBR0MsUUFBUSxDQUFDQyxhQUFULENBQXVCLEtBQXZCLENBQWQ7QUFDQUYsSUFBQUEsS0FBSyxDQUFDRyxTQUFOLENBQWdCQyxHQUFoQixDQUFvQixPQUFwQixFQUE2QixNQUE3QjtBQUNBSixJQUFBQSxLQUFLLENBQUNLLFlBQU4sQ0FBbUIsTUFBbkIsRUFBMkIsT0FBM0I7O0FBRUEsWUFBUVAsT0FBTyxDQUFDUSxJQUFoQjtBQUNFLFdBQUssTUFBTDtBQUNFTixRQUFBQSxLQUFLLENBQUNHLFNBQU4sQ0FBZ0JDLEdBQWhCLENBQW9CLFlBQXBCO0FBQ0E7O0FBQ0YsV0FBSyxTQUFMO0FBQ0VKLFFBQUFBLEtBQUssQ0FBQ0csU0FBTixDQUFnQkMsR0FBaEIsQ0FBb0IsZUFBcEI7QUFDQTs7QUFDRixXQUFLLFNBQUw7QUFDRUosUUFBQUEsS0FBSyxDQUFDRyxT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U0FORCxFQU1HLEtBTkg7QUFPRDtBQUNGLEtBVmdCLENBQWpCO0FBV0QsR0FmRCxFQWVHLEtBZkg7QUFnQkQsQ0FsQkQsSSxDQW1CQSIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDExLTIwMTgsIEhvcnRvbndvcmtzIEluYy4gIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBFeGNlcHQgYXMgZXhwcmVzc2x5IHBlcm1pdHRlZCBpbiBhIHdyaXR0ZW4gYWdyZWVtZW50IGJldHdlZW4geW91XG4gKiBvciB5b3VyIGNvbXBhbnkgYW5kIEhvcnRvbndvcmtzLCBJbmMsIGFueSB1c2UsIHJlcHJvZHVjdGlvbixcbiAqIG1vZGlmaWNhdGlvbiwgcmVkaXN0cmlidXRpb24sIHNoYXJpbmcsIGxlbmRpbmcgb3Igb3RoZXIgZXhwbG9pdGF0aW9uXG4gKiBvZiBhbGwgb3IgYW55IHBhcnQgb2YgdGhlIGNvbnRlbnRzIG9mIHRoaXMgZmlsZSBpcyBzdHJpY3RseSBwcm9oaWJpdGVkLlxuICovXG5cbi8vI3JlZ2lvbiBBbGVydCB0ZXN0ZXJcbmNvbnN0IGFkZEFsZXJ0ID0gKG1lc3NhZ2UsIG9wdGlvbnMgPSB7fSkgPT4ge1xuICBjb25zdCBtYWtlQWxlcnQgPSAobWVzc2FnZSwgb3B0aW9ucykgPT4ge1xuICAgIGNvbnN0IGFsZXJ0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgYWxlcnQuY2xhc3NMaXN0LmFkZCgnYWxlcnQnLCAnZmFkZScpO1xuICAgIGFsZXJ0LnNldEF0dHJpYnV0ZSgncm9sZScsICdhbGVydCcpO1xuXG4gICAgc3dpdGNoIChvcHRpb25zLnR5cGUpIHtcbiAgICAgIGNhc2UgJ2luZm8nOlxuICAgICAgICBhbGVydC5jbGFzc0xpc3QuYWRkKCdhbGVydC1pbmZvJyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnc3VjY2Vzcyc6XG4gICAgICAgIGFsZXJ0LmNsYXNzTGlzdC5hZGQoJ2FsZXJ0LXN1Y2Nlc3MnKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICd3YXJuaW5nJzpcbiAgICAgICAgYWxlcnQuY2xhc3NMaXN0LmFkZCgnYWxlcnQtd2FybmluZycpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2Rhbmdlcic6XG4gICAgICAgIGFsZXJ0LmNsYXNzTGlzdC5hZGQoJ2FsZXJ0LWRhbmdlcicpO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGFsZXJ0LmNsYXNzTGlzdC5hZGQoJ2FsZXJ0LWRlZmF1bHQnKTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgY29uc3Qgd3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gICAgY29uc3QgaGVhZGluZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGhlYWRpbmcuY2xhc3NMaXN0LmFkZCgnYWxlcnQtaGVhZGluZycpO1xuICAgIGhlYWRpbmcuaW5uZXJIVE1MID0gbWVzc2FnZTtcbiAgICB3cmFwcGVyLmFwcGVuZENoaWxkKGhlYWRpbmcpO1xuXG4gICAgaWYgKG9wdGlvbnMuY29udGVudCkge1xuICAgICAgY29uc3QgY29udGVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgY29udGVudC5pbm5lckhUTUwgPSBvcHRpb25zLmNvbnRlbnQ7XG4gICAgICB3cmFwcGVyLmFwcGVuZENoaWxkKGNvbnRlbnQpO1xuICAgIH1cblxuICAgIGFsZXJ0LmFwcGVuZENoaWxkKHdyYXBwZXIpO1xuXG4gICAgaWYgKG9wdGlvbnMuZGlzbWlzc2libGUpIHtcbiAgICAgIGFsZXJ0LmNsYXNzTGlzdC5hZGQoJ2FsZXJ0LWRpc21pc3NpYmxlJyk7XG4gICAgICBjb25zdCB0ZW1wID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICB0ZW1wLmlubmVySFRNTCA9ICc8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImNsb3NlXCIgYXJpYS1sYWJlbD1cIkNsb3NlXCIgb25jbGljaz1cImRpc21pc3NBbGVydEhhbmRsZXIodGhpcylcIj48L2J1dHRvbj4nO1xuICAgICAgYWxlcnQuYXBwZW5kQ2hpbGQodGVtcC5maXJzdENoaWxkKTtcbiAgICB9XG5cbiAgICBjb25zdCBhbGVydENvbGxhcHNlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgYWxlcnRDb2xsYXBzZS5jbGFzc0xpc3QuYWRkKCdhbGVydC1jb2xsYXBzZScsICdjb2xsYXBzZScsICdzaG93Jyk7XG4gICAgYWxlcnRDb2xsYXBzZS5hcHBlbmRDaGlsZChhbGVydCk7XG5cbiAgICByZXR1cm4gYWxlcnRDb2xsYXBzZTtcbiAgfTtcblxuICBpZiAoIW1lc3NhZ2UgfHwgdHlwZW9mIG1lc3NhZ2UgIT09ICdzdHJpbmcnKSByZXR1cm47XG5cbiAgY29uc3Qge1xuICAgIHRhcmdldCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCxcbiAgICB0eXBlID0gJ2RlZmF1bHQnLCAvLyBtYXkgYmUgJ2luZm8nLCAnc3VjY2VzcycsICd3YXJuaW5nJywgJ2RhbmdlcicsIG9yICdkZWZhdWx0J1xuICAgIGNvbnRlbnQgPSBudWxsLFxuICAgIGRpc21pc3NpYmxlID0gdHJ1ZSxcbiAgICBkdXJhdGlvbiA9IDAsIC8vaW4gc2Vjb25kc1xuICAgIHBvc2l0aW9uID0gJ2ZpcnN0JyAvLyBpZiAnZmlyc3QnIGFsZXJ0IHdpbGwgYmUgaW5zZXJ0ZWQgYWJvdmUgZXhpc3RpbmcgYWxlcnRzXG4gIH0gPSBvcHRpb25zO1xuXG4gIGNvbnN0IGFsZXJ0ID0gbWFrZUFsZXJ0KG1lc3NhZ2UsIHt0YXJnZXQsIHR5cGUsIGNvbnRlbnQsIGRpc21pc3NpYmxlLCBkdXJhdGlvbiwgcG9zaXRpb259KTtcblxuICBpZiAocG9zaXRpb24gPT09ICdmaXJzdCcpIHtcbiAgICB0YXJnZXQuaW5zZXJ0QmVmb3JlKGFsZXJ0LCB0YXJnZXQuZmlyc3RDaGlsZCk7XG4gIH0gZWxzZSB7XG4gICAgdGFyZ2V0LmFwcGVuZENoaWxkKGFsZXJ0KTtcbiAgfVxuXG4gIHNldFRpbWVvdXQoKCkgPT4gYWxlcnQuZmlyc3RDaGlsZC5jbGFzc0xpc3QuYWRkKCdzaG93JykpO1xuXG4gIGlmIChkdXJhdGlvbikge1xuICAgIHNldFRpbWVvdXQoKCkgPT4gZGlzbWlzc0FsZXJ0KCQoYWxlcnQuZmlyc3RDaGlsZCkpLCBkdXJhdGlvbiAqIDEwMDApO1xuICB9XG59O1xuXG5jb25zdCBhZGRBbGVydEhhbmRsZXIgPSBldmVudCA9PiB7XG4gIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgY29uc3QgYXJyYXlUb09iaiA9IChvdXRwdXQsIGlucHV0KSA9PiB7XG4gICAgb3V0cHV0W2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XG4gICAgcmV0dXJuIG91dHB1dDtcbiAgfTtcblxuICBjb25zdCBkYXRhID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS5zZXJpYWxpemVBcnJheSgpLnJlZHVjZShhcnJheVRvT2JqLCB7fSk7XG5cbiAgY29uc3QgZ2V0VGFyZ2V0ID0gKHRvcEJvdHRvbSwgcmlnaHRMZWZ0KSA9PiB7XG4gICAgbGV0IGlkO1xuXG4gICAgaWYgKHRvcEJvdHRvbSA9PT0gJ3RvcCcpIHtcbiAgICAgIGlmIChyaWdodExlZnQgPT09ICdyaWdodCcpIHtcbiAgICAgICAgaWQgPSAnYWxlcnRzVG9wUmlnaHQnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWQgPSAnYWxlcnRzVG9wTGVmdCc7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChyaWdodExlZnQgPT09ICdyaWdodCcpIHtcbiAgICAgICAgaWQgPSAnYWxlcnRzQm90dG9tUmlnaHQnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWQgPSAnYWxlcnRzQm90dG9tTGVmdCc7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKSB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG4gIH1cblxuICBjb25zdCBvcHRpb25zID0ge1xuICAgIHRhcmdldDogZ2V0VGFyZ2V0KGRhdGEuYWxlcnRUb3BCb3R0b20sIGRhdGEuYWxlcnRSaWdodExlZnQpLFxuICAgIHR5cGU6IGRhdGEuYWxlcnRUeXBlLFxuICAgIGNvbnRlbnQ6IGRhdGEuYWxlcnRDb250ZW50LFxuICAgIGRpc21pc3NpYmxlOiAhIWRhdGEuYWxlcnREaXNtaXNzaWJsZSxcbiAgICBkdXJhdGlvbjogd2luZG93LnBhcnNlSW50KGRhdGEuYWxlcnREdXJhdGlvbiksXG4gICAgcG9zaXRpb246IGRhdGEuYWxlcnRUb3BCb3R0b20gPT09ICdib3R0b20nID8gJ2ZpcnN0JyA6ICdsYXN0J1xuICB9O1xuXG4gIGFkZEFsZXJ0KGRhdGEuYWxlcnRNZXNzYWdlLCBvcHRpb25zKTtcblxuICByZXR1cm4gZmFsc2U7XG59O1xuXG5jb25zdCBkaXNtaXNzQWxlcnQgPSBhbGVydCA9PiB7XG4gIGNvbnN0IGFsZXJ0Q29sbGFwc2UgPSBhbGVydC5jbG9zZXN0KCcuYWxlcnQtY29sbGFwc2UnKTtcblxuICBhbGVydC5vbmUoJ2Nsb3NlLmJzLmFsZXJ0JywgKCkgPT4gYWxlcnRDb2xsYXBzZS5jb2xsYXBzZSgnaGlkZScpKTtcbiAgYWxlcnRDb2xsYXBzZS5vbmUoJ2hpZGRlbi5icy5jb2xsYXBzZScsICgpID0+IGFsZXJ0Q29sbGFwc2UucmVtb3ZlKCkpO1xuXG4gIGFsZXJ0LmFsZXJ0KCdjbG9zZScpO1xufTtcblxuY29uc3QgZGlzbWlzc0FsZXJ0SGFuZGxlciA9IGNsb3NlID0+IHtcbiAgY29uc3QgYWxlcnQgPSAkKGNsb3NlKS5jbG9zZXN0KCcuYWxlcnQnKTtcbiAgZGlzbWlzc0FsZXJ0KGFsZXJ0KTtcbn07XG5cbmNvbnN0IGRpc21pc3NBbGxBbGVydHMgPSAoKSA9PiB7XG4gICQoXCIuYWxlcnQtY29udGFpbmVyIC5hbGVydFwiKS5hbGVydCgnY2xvc2UnKTtcbn07XG4vLyNlbmRyZWdpb25cblxuLy8jcmVnaW9uIENvbnRhaW5lciBleGFtcGxlXG5jb25zdCB1cGRhdGVDb250YWluZXJFeGFtcGxlID0gZnVuY3Rpb24gKCkge1xuICAkKCcjZG9jdW1lbnRXaWR0aCcpLnRleHQoJCgnYm9keScpLmNzcygnd2lkdGgnKSk7XG4gICQoJyNjb250YWluZXJXaWR0aCcpLnRleHQoJCgnI2NvbnRhaW5lckV4YW1wbGUnKS5jc3MoJ3dpZHRoJykpO1xuICAkKCcjY29udGFpbmVyRmx1aWRXaWR0aCcpLnRleHQoJCgnI2NvbnRhaW5lckZsdWlkRXhhbXBsZScpLmNzcygnd2lkdGgnKSk7XG59O1xuXG4kKGZ1bmN0aW9uICgpIHtcbiAgaWYgKCQuZm4ucG9wb3Zlcikge1xuICAgICQoJ1tkYXRhLXRvZ2dsZT1cInBvcG92ZXJcIl0nKS5wb3BvdmVyKCk7XG4gIH1cbiAgaWYgKCQuZm4udG9vbHRpcCkge1xuICAgICQoJ1tkYXRhLXRvZ2dsZT1cInRvb2x0aXBcIl0nKS50b29sdGlwKCk7XG4gIH1cblxuICB1cGRhdGVDb250YWluZXJFeGFtcGxlKCk7XG4gICQod2luZG93KS5yZXNpemUodXBkYXRlQ29udGFpbmVyRXhhbXBsZSk7XG5cbiAgJCgnI2FkZEFsZXJ0Jykub24oJ3N1Ym1pdCcsIGFkZEFsZXJ0SGFuZGxlcik7XG4gICQoJyNkaXNtaXNzQWxsQWxlcnRzJykub24oJ2NsaWNrJywgZGlzbWlzc0FsbEFsZXJ0cyk7XG59KTtcbi8vI2VuZHJlZ2lvblxuXG4vLyNyZWdpb24gV2l6YXJkIGluIG1vZGFsXG5sZXQgY3VycmVudFN0ZXA7XG5cbmZ1bmN0aW9uIHVwZGF0ZURpc3BsYXllZFN0ZXAodGFyZ2V0U3RlcCkge1xuICBjb25zdCB0b0hpZGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbY2xhc3MqPVwic3RlcC1cIl0nKTtcbiAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbCh0b0hpZGUsIGVsID0+IHtcbiAgICBlbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICB9KTtcblxuICBjb25zdCB0b1Nob3cgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGBzdGVwLSR7dGFyZ2V0U3RlcH1gKTtcbiAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbCh0b1Nob3csIGVsID0+IHtcbiAgICBlbC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgfSk7XG5cbiAgY29uc3QgYnV0dG9ucyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3dpemFyZC1uYXYtYnV0dG9uJyk7XG4gIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoYnV0dG9ucywgZWwgPT4ge1xuICAgIGVsLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICB9KTtcblxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmluaXNoJykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgaWYgKHRhcmdldFN0ZXAgPT09IDEpIHtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmFjaycpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gIH1cbiAgaWYgKHRhcmdldFN0ZXAgPT09IDMpIHtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmV4dCcpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpbmlzaCcpLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICB9XG59XG5cbmZ1bmN0aW9uIGJhY2soKSB7XG4gIHVwZGF0ZURpc3BsYXllZFN0ZXAoLS1jdXJyZW50U3RlcCk7XG59XG5cbmZ1bmN0aW9uIG5leHQoKSB7XG4gIHVwZGF0ZURpc3BsYXllZFN0ZXAoKytjdXJyZW50U3RlcCk7XG59XG5cbmZ1bmN0aW9uIGdvVG9TdGVwKHN0ZXApIHtcbiAgY3VycmVudFN0ZXAgPSBzdGVwO1xuICB1cGRhdGVEaXNwbGF5ZWRTdGVwKHN0ZXApO1xufVxuXG5mdW5jdGlvbiBjYW5jZWxDb25maXJtYXRpb24oc2VsZWN0b3IpIHtcbiAgJChzZWxlY3Rvcikub25lKCdoaWRkZW4uYnMubW9kYWwnLCAoKSA9PiAkKCdib2R5JykuYWRkQ2xhc3MoJ21vZGFsLW9wZW4nKSk7XG4gICQoc2VsZWN0b3IpLm1vZGFsKCdoaWRlJyk7XG59XG4vLyNlbmRyZWdpb25cblxuLy8jcmVnaW9uIEZvcm0gdmFsaWRhdGlvblxuLy8gRXhhbXBsZSBzdGFydGVyIEphdmFTY3JpcHQgZm9yIGRpc2FibGluZyBmb3JtIHN1Ym1pc3Npb25zIGlmIHRoZXJlIGFyZSBpbnZhbGlkIGZpZWxkc1xuKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAvLyBGZXRjaCBhbGwgdGhlIGZvcm1zIHdlIHdhbnQgdG8gYXBwbHkgY3VzdG9tIEJvb3RzdHJhcCB2YWxpZGF0aW9uIHN0eWxlcyB0b1xuICAgIHZhciBmb3JtcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdmb3JtJyk7XG4gICAgLy8gTG9vcCBvdmVyIHRoZW0gYW5kIHByZXZlbnQgc3VibWlzc2lvblxuICAgIHZhciB2YWxpZGF0aW9uID0gQXJyYXkucHJvdG90eXBlLmZpbHRlci5jYWxsKGZvcm1zLCBmdW5jdGlvbiAoZm9ybSkge1xuICAgICAgaWYgKGZvcm0uY2xhc3NMaXN0LmNvbnRhaW5zKCd2YWxpZGF0ZScpKSB7XG4gICAgICAgIGZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgaWYgKGZvcm0uY2hlY2tWYWxpZGl0eSgpID09PSBmYWxzZSkge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBmb3JtLmNsYXNzTGlzdC5hZGQoJ3dhcy12YWxpZGF0ZWQnKTtcbiAgICAgICAgfSwgZmFsc2UpO1xuICAgICAgfVxuICAgIH0pO1xuICB9LCBmYWxzZSk7XG59KSgpO1xuLy8jZW5kcmVnaW9uXG4iXSwiZmlsZSI6ImRlbW8uanMifQ==
